---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "gpcn_virtualmachine Resource - gpcn"
subcategory: ""
description: |-
  Manages a virtual machine instance with configurable compute resources, networking, and storage
---

# gpcn_virtualmachine (Resource)

Manages a virtual machine instance with configurable compute resources, networking, and storage

## Example Usage

```terraform
# Example: Creating GPCN Virtual Machines
#
# This example demonstrates creating a virtual machine with networks and volumes.
# It shows how to create the required dependencies (networks and volumes) and
# attach them to a virtual machine instance.

terraform {
  required_providers {
    gpcn = {
      source  = "Global-Private-Cloud-Network/gpcn"
      version = "~>0.1.0"
    }
  }
}

provider "gpcn" {
  host = "https://api.gpcn.com"
}

# Lookup datacenter in East US region
data "gpcn_datacenters" "east_us" {
  country_name = "United States"
  region_name  = "east"
}

# Create a standard network for the VM
resource "gpcn_network" "vm_network" {
  name          = "vm-network-standard"
  network_type  = "standard"
  datacenter_id = data.gpcn_datacenters.east_us.datacenters[0].id

  description = "Standard network for virtual machine connectivity"

  # Network configuration
  cidr_block = "10.0.0.0/24"

  # DHCP range
  dhcp_start_address = "10.0.0.10"
  dhcp_end_address   = "10.0.0.254"

  # DNS servers
  dns_servers = "8.8.8.8, 8.8.4.4"
}

# Create a custom network for additional connectivity
resource "gpcn_network" "vm_network_custom" {
  name          = "vm-network-custom"
  network_type  = "custom"
  datacenter_id = data.gpcn_datacenters.east_us.datacenters[0].id

  description = "Custom network for advanced networking configuration"
}

# Create storage volume for the VM
resource "gpcn_volume" "vm_storage" {
  name          = "vm-storage-primary"
  datacenter_id = data.gpcn_datacenters.east_us.datacenters[0].id
  volume_type   = "SSD"
  size_gb       = 256
}

# Create the virtual machine
resource "gpcn_virtualmachine" "example" {
  name          = "terraform-demo-vm"
  datacenter_id = data.gpcn_datacenters.east_us.datacenters[0].id

  # Compute configuration
  size = {
    category = "general"
    tier     = "micro"
  }
  image = "Alma Linux 8.x"

  wait_for_startup = false

  # Networking
  allocate_public_ip = false
  network_ids = [
    gpcn_network.vm_network.id,
    gpcn_network.vm_network_custom.id
  ]

  # Storage
  volume_ids = [
    gpcn_volume.vm_storage.id
  ]
}

output "example_gpcn_virtualmachine" {
  value = gpcn_virtualmachine.example
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `allocate_public_ip` (Boolean) Whether to allocate a public IP address for the virtual machine
- `datacenter_id` (String) Unique identifier of the datacenter where the virtual machine will be created. Changing this value requires replacing the virtual machine
- `image` (String) Operating system image to use for the virtual machine. Changing this value requires replacing the virtual machine.  Note that not all images are available for every datacenter
- `name` (String) Human-readable name for the virtual machine
- `size` (Attributes) Hardware size configuration defining the compute resources (CPU, memory, disk) for the virtual machine. Specified using a category and tier pairing. Downsizing requires replacing the virtual machine (see [below for nested schema](#nestedatt--size))

### Optional

- `network_ids` (List of String) List of network IDs to attach to the virtual machine. Maximum of 5 networks allowed
- `volume_ids` (List of String) List of volume IDs to attach to the virtual machine. Maximum of 5 volumes allowed. A volume can only be attached to a single virtual machine, so this parameter will not work as expected when using Terraform's count meta-attribute
- `wait_for_startup` (Boolean) Determines if Terraform should wait for the virtual machine to start running before exiting. This will add a few minutes to virtual machine creation. Defaults to true

### Read-Only

- `additional_images` (Attributes List) List of available operating system images that can be used for this virtual machine (see [below for nested schema](#nestedatt--additional_images))
- `additional_sizes` (Attributes List) List of available size configurations for this virtual machine in the datacenter (see [below for nested schema](#nestedatt--additional_sizes))
- `configuration` (Map of String) Hardware configuration details including CPU, RAM, and disk specifications
- `created_time` (String) Timestamp when the virtual machine was created in ISO-8601 format
- `id` (String) Unique identifier for the virtual machine in UUID format
- `image_id` (Number) Internal identifier for the selected image
- `last_updated` (String) Timestamp when the virtual machine was last updated in ISO-8601 format
- `location` (Map of String) Location details including datacenter, region, and country information
- `size_id` (Number) Internal identifier for the selected size configuration

<a id="nestedatt--size"></a>
### Nested Schema for `size`

Required:

- `category` (String) Short code representing the category (e.g., 'general')
- `tier` (String) Human-readable name of the size configuration (e.g., 'micro')


<a id="nestedatt--additional_images"></a>
### Nested Schema for `additional_images`

Read-Only:

- `id` (Number) Unique identifier for the image
- `name` (String) Name of the image


<a id="nestedatt--additional_sizes"></a>
### Nested Schema for `additional_sizes`

Read-Only:

- `category` (String) Category name of the size configuration (e.g., 'General Purpose')
- `category_code` (String) Short code representing the category (e.g., 'general')
- `code` (String) Short code uniquely identifying this size configuration
- `cpu` (Number) Number of CPU cores allocated to this size configuration
- `disk` (Number) Base storage disk size in GB allocated to this size configuration
- `id` (Number) Unique identifier for the size configuration
- `memory` (Number) Amount of memory (RAM) in GB allocated to this size configuration
- `name` (String) Human-readable name of the size configuration

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import gpcn_virtualmachine.example "c13808d9-3b7d-42c5-a21d-f0961308a38a"
```
