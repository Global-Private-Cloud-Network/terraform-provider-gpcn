---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "gpcn_virtualmachine Resource - gpcn"
subcategory: ""
description: |-
  Manages a virtual machine instance with configurable compute resources, networking, and storage
---

# gpcn_virtualmachine (Resource)

Manages a virtual machine instance with configurable compute resources, networking, and storage

## Example Usage

```terraform
# Example: Creating GPCN Virtual Machines
#
# This example demonstrates creating a virtual machine with networks and volumes.
# It shows how to create the required dependencies (networks and volumes) and
# attach them to a virtual machine instance.

terraform {
  required_providers {
    gpcn = {
      source  = "Global-Private-Cloud-Network/gpcn"
      version = "~>0.1.0"
    }
  }
}

provider "gpcn" {
  host = "https://api.gpcn.com"
}

# Lookup datacenter in East US region
data "gpcn_datacenters" "east_us" {
  country_name = "United States"
  region_name  = "east"
}

# Create a standard network for the VM
resource "gpcn_network" "vm_network" {
  name          = "vm-network-standard"
  network_type  = "standard"
  datacenter_id = data.gpcn_datacenters.east_us.datacenters[0].id

  description = "Standard network for virtual machine connectivity"

  # Network configuration
  cidr_block = "10.0.0.0/24"

  # DHCP range
  dhcp_start_address = "10.0.0.10"
  dhcp_end_address   = "10.0.0.254"

  # DNS servers
  dns_servers = "8.8.8.8, 8.8.4.4"
}

# Create a custom network for additional connectivity
resource "gpcn_network" "vm_network_custom" {
  name          = "vm-network-custom"
  network_type  = "custom"
  datacenter_id = data.gpcn_datacenters.east_us.datacenters[0].id

  description = "Custom network for advanced networking configuration"
}

# Create storage volume for the VM
resource "gpcn_volume" "vm_storage" {
  name          = "vm-storage-primary"
  datacenter_id = data.gpcn_datacenters.east_us.datacenters[0].id
  volume_type   = "SSD"
  size_gb       = 256
}

# Create the virtual machine
resource "gpcn_virtualmachine" "example" {
  name          = "terraform-demo-vm"
  datacenter_id = data.gpcn_datacenters.east_us.datacenters[0].id

  # Compute configuration
  size = {
    category = "general"
    tier     = "g-micro-1"
  }
  image = "Alma Linux 8.x"

  wait_for_startup = false

  # Networking
  allocate_public_ip = false
  network_ids = [
    gpcn_network.vm_network.id,
    gpcn_network.vm_network_custom.id
  ]

  # Storage
  volume_ids = [
    gpcn_volume.vm_storage.id
  ]
}

output "example_gpcn_virtualmachine" {
  value = gpcn_virtualmachine.example
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `allocate_public_ip` (Boolean) Whether to allocate a public IP address for the virtual machine
- `datacenter_id` (String) Unique identifier of the datacenter where the virtual machine will be created. Changing this value requires replacing the virtual machine
- `image` (String) Operating system image to use for the virtual machine. Must be one of the supported image names. Changing this value requires replacing the virtual machine. Note that not all images are available for every datacenter
- `name` (String) Human-readable name for the virtual machine
- `size` (Attributes) Hardware size configuration defining the compute resources (CPU, memory, disk) for the virtual machine. Specified using a category and tier pairing. Downsizing requires replacing the virtual machine. Note that not all sizes are available for every datacenter (see [below for nested schema](#nestedatt--size))

### Optional

- `network_ids` (List of String) List of network IDs to attach to the virtual machine. Maximum of 5 networks allowed
- `volume_ids` (List of String) List of volume IDs to attach to the virtual machine. Maximum of 5 volumes allowed. A volume can only be attached to a single virtual machine, so this parameter will not work as expected when using Terraform's count meta-attribute
- `wait_for_startup` (Boolean) Determines if Terraform should wait for the virtual machine to start running before exiting. This will add a few minutes to virtual machine creation. Defaults to true

### Read-Only

- `configuration` (Map of String) Hardware configuration details including CPU, RAM, and disk specifications
- `created_time` (String) Timestamp when the virtual machine was created in ISO-8601 format
- `id` (String) Unique identifier for the virtual machine in UUID format
- `last_updated` (String) Timestamp when the virtual machine was last updated in ISO-8601 format
- `location` (Map of String) Location details including datacenter, region, and country information

<a id="nestedatt--size"></a>
### Nested Schema for `size`

Required:

- `category` (String) Short code representing the category. Must be one of: 'general' or 'memory'
- `tier` (String) Human-readable name of the size configuration. Must be one of: 'g-micro-1', 'g-small-1', 'g-medium-1', 'g-large-1', 'g-xl-1', 'm-micro-1', 'm-small-1', 'm-medium-1', 'm-large-1', 'm-xl-1'

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import gpcn_virtualmachine.example "c13808d9-3b7d-42c5-a21d-f0961308a38a"
```
